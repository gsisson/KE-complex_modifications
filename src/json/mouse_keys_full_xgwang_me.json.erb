{
    "title": "Mouse keys (xgwang.me)",
    "rules": [
        {
            "description": "Mouse keys (xgwang.me)",
            "manipulators": [
                <%# -------------------------------------------------- %>
                <%# Disable mouse_keys_full by pressing right_command is released %>
                <%# -------------------------------------------------- %>

                {
                    "type": "basic",
                    "from": <%= from("right_command", ["left_command"], ["any"]) %>,
                    "to": <%= to([["right_command"]]) %>,
                    "to_after_key_up": [
                        { "set_variable": { "name": "mouse_keys_full", "value": 0 } }
                    ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 }
                    ]
                },

                <%# -------------------------------------------------- %>
                <%# Enable mouse_keys_full by pressing right_command %>
                <%# -------------------------------------------------- %>

                {
                    "type": "basic",
                    "from": <%= from("right_command", ["left_command"], ["any"]) %>,
                    "to": <%= to([["right_command"]]) %>,
                    "to_after_key_up": [
                        { "set_variable": { "name": "mouse_keys_full", "value": 1 } }
                    ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 0 }
                    ]
                },

                <%# -------------------------------------------------- %>
                <%# mouse_keys %>
                <%# -------------------------------------------------- %>

                <%# scroll %>

                {
                    "type": "basic",
                    "from": <%= from("h", [], ["any"]) %>,
                    "to": [ { "mouse_key": { "horizontal_wheel": 32 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("j", [], ["any"]) %>,
                    "to": [ { "mouse_key": { "vertical_wheel": 32 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("k", [], ["any"]) %>,
                    "to": [ { "mouse_key": { "vertical_wheel": -32 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 }
                    ]
                },
                {
                    "type": "basic",
                    "from": <%= from("l", [], ["any"]) %>,
                    "to": [ { "mouse_key": { "horizontal_wheel": -32 } } ],
                    "conditions": [
                        { "type": "variable_if", "name": "mouse_keys_full", "value": 1 },
                        { "type": "variable_if", "name": "mouse_keys_full_scroll", "value": 1 }
                    ]
                },

                <%# normal %>

                {
                    "type": "basic",
                    "from": <%= from("h", [], ["any"]) %>,
                    "to": [ { "mouse_key": { "x": -1536 } } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("j", [], ["any"]) %>,
                    "to": [ { "mouse_key": { "y": 1536 } } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("k", [], ["any"]) %>,
                    "to": [ { "mouse_key": { "y": -1536 } } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("l", [], ["any"]) %>,
                    "to": [ { "mouse_key": { "x": 1536 } } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },

                <%# buttons %>

                {
                    "type": "basic",
                    "from": <%= from("v", [], ["any"]) %>,
                    "to": [ { "pointing_button": "button1" } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("b", [], ["any"]) %>,
                    "to": [ { "pointing_button": "button3" } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("n", [], ["any"]) %>,
                    "to": [ { "pointing_button": "button2" } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },

                <%# controls %>

                {
                    "type": "basic",
                    "from": <%= from("f", [], ["any"]) %>,
                    "to": [ { "mouse_key": { "speed_multiplier": 2.0 } } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("d", [], ["any"]) %>,
                    "to": [ { "mouse_key": { "speed_multiplier": 0.5 } } ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                },
                {
                    "type": "basic",
                    "from": <%= from("s", [], ["any"]) %>,
                    "to": [
                        { "set_variable": { "name": "mouse_keys_full_scroll", "value": 1 } }
                    ],
                    "to_after_key_up": [
                        { "set_variable": { "name": "mouse_keys_full_scroll", "value": 0 } }
                    ],
                    "conditions": [ { "type": "variable_if", "name": "mouse_keys_full", "value": 1 } ]
                }
            ]
        }
    ]
}
